const{promisify:promisify}=require("util"),fs=require("fs"),{resolve:resolve}=require("path"),path=require("path");function fscreateReadStream(n){return new Promise((t,e)=>{const r=fs.createReadStream(n,{encoding:"utf-8"});r.on("data",e=>{t(e)})})}async function fscreateWriteStream(n,i,s){return await dirExists(n),new Promise((t,e)=>{let r=fs.createWriteStream(n+"/"+i,{});r.write(s,e=>{t(e)})})}function getStat(t){return new Promise((r,e)=>{fs.stat(t,(e,t)=>{r(!e&&t)})})}function unlink(n){return new Promise(async(e,t)=>{let r=[];fs.existsSync(n)&&(fs.statSync(n).isDirectory()?(r=fs.readdirSync(n),r.forEach((e,t)=>{e=n+"/"+e;fs.statSync(e).isDirectory()?unlink(e):fs.unlinkSync(e)}),fs.rmdirSync(n)):fs.unlinkSync(n)),e(!0)})}function mkdir(r){return new Promise((t,e)=>{fs.mkdir(r,e=>{t(!e)})})}async function dirExists(e){let t=await getStat(e);if(t&&t.isDirectory())return!0;if(t)return!1;let r;return await dirExists(path.parse(e).dir)&&(r=await mkdir(e)),r}function isFileExisted(r){return new Promise(function(t,e){fs.access(r,e=>{t(!e)})})}function newStr(e,t,r){return e.slice(0,t=-1===t?0:t)+r+e.slice(t,e.length)}function format(e,t){var r,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n){var i=n[r];new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i:("00"+i).substr((""+i).length)))}return t}module.exports={fscreateReadStream:fscreateReadStream,fscreateWriteStream:fscreateWriteStream,isFileExisted:isFileExisted,newStr:newStr,format:format,unlink:unlink};