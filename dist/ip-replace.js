const{resolve:resolve}=require("path"),{fscreateReadStream:fscreateReadStream,fscreateWriteStream:fscreateWriteStream,isFileExisted:isFileExisted,newStr:newStr}=require("./common.js"),{run:run}=require("runjs"),chalk=require("chalk"),log=e=>console.log(chalk.green(e)),errorLog=e=>console.log(chalk.red(e)),jsonObj=require("../PCFile/ipJson.json");module.exports=async e=>{"string"!=typeof e&&(e=""),log("resolve   : "+resolve("./")+"/"+e);let r=resolve("./")+(e&&0!==e.length?`/${e}`:"");if(await isFileExisted(r)){let s=await fscreateReadStream(r);Object.keys(jsonObj).forEach(e=>{var r;-1<s.indexOf(e)&&(r=new RegExp(e,"g"),s=s.replace(r,jsonObj[e]))});var t=e.split("/"),a=t[t.length-1],t=r.substring(0,r.indexOf(a)-1);await fscreateWriteStream(`${t}`,a,s),log(`${e} 测试替换域名更换成功`)}else log(`${e} 找不到文件路径`)};