const{resolve:resolve}=require("path"),{fscreateReadStream:fscreateReadStream,fscreateWriteStream:fscreateWriteStream,isFileExisted:isFileExisted,newStr:newStr}=require("./common.js"),{run:run}=require("runjs"),chalk=require("chalk"),log=e=>console.log(chalk.green(e)),errorLog=e=>console.log(chalk.red(e));module.exports=async(r="")=>{"string"!=typeof r&&(r=""),log("resolve   : "+resolve("./")+"/"+r);let e=resolve("./")+(r&&0!==r.length?`/${r}`:"");try{var a=(o=`${e}/src/components/Breadcrumb/index.vue`,c=`${__dirname}/../PCFile/breadcrumb.txt`,await(await isFileExisted(o)?(errorLog("已存在目标文件src/components/Breadcrumb/index.vue"),Promise.reject(new Error("Error"))):(c=await fscreateReadStream(c),Promise.resolve(c)))),t=await async function(){var r=`${e}/src/layout/components/Navbar.vue`;if(await isFileExisted(r)){let e=await fscreateReadStream(r);return-1<e.indexOf('<div class="right-menu">')&&-1===e.indexOf('<breadcrumb class="breadcrumb-container"/>')?(e=newStr(e,e.indexOf('<div class="right-menu">'),`<breadcrumb class="breadcrumb-container"/>
                        `),e=newStr(e,e.indexOf("export default "),`import Breadcrumb from '@/components/Breadcrumb'
                        `),e=newStr(e,e.indexOf("Hamburger,"),`Breadcrumb,
                        `),Promise.resolve(e)):(errorLog(`src/layout/components/Navbar.vue文件修改失败!
                请检查代码:
                1、是否有: <div class="right-menu">
                2、是否已添加：<breadcrumb class="breadcrumb-container"/>
                `),Promise.reject(new Error("Error")))}return errorLog("找不到src/layout/components/Navbar.vue目标文件，请查看命令是否使用正确"),Promise.reject(new Error("Error"))}();await fscreateWriteStream(`${e}/src/components/Breadcrumb`,"index.vue",a),log("src/components/Breadcrumb/index.vue文件添加成功"),await fscreateWriteStream(`${e}/src/layout/components`,"Navbar.vue",t),log("src/layout/components/Navbar.vue修改成功"),run("npm run lint:fix",{cwd:`${e}`})}catch(e){if(errorLog("addBreadcrumb 目标代码出错，请按上述报错信息检查代码"),r&&0!==r.length)return console.log(123123),Promise.reject(()=>{})}var o,c};