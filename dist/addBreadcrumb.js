const resolve=require("path")["resolve"],{fscreateReadStream,fscreateWriteStream,isFileExisted,newStr}=require("./common.js"),run=require("runjs")["run"],chalk=require("chalk"),log=r=>console.log(chalk.green(r)),errorLog=r=>console.log(chalk.red(r));module.exports=async(e="")=>{"string"!=typeof e&&(e=""),log("resolve   : "+resolve("./")+"/"+e);let r=resolve("./")+(e&&0!==e.length?"/"+e:"");try{t=r+"/src/components/Breadcrumb/index.vue",n=__dirname+"/../PCFile/breadcrumb.txt";var a=await(await isFileExisted(t)?(errorLog("已存在目标文件src/components/Breadcrumb/index.vue"),Promise.reject(new Error("Error"))):(t=await fscreateReadStream(n),Promise.resolve(t))),o=await async function(){var e=r+"/src/layout/components/Navbar.vue";if(await isFileExisted(e)){let r=await fscreateReadStream(e);return-1<r.indexOf('<div class="right-menu">')&&-1===r.indexOf('<breadcrumb class="breadcrumb-container"/>')?(r=newStr(r,r.indexOf('<div class="right-menu">'),`<breadcrumb class="breadcrumb-container"/>
                        `),r=newStr(r,r.indexOf("export default "),`import Breadcrumb from '@/components/Breadcrumb'
                        `),r=newStr(r,r.indexOf("Hamburger,"),`Breadcrumb,
                        `),Promise.resolve(r)):(errorLog(`src/layout/components/Navbar.vue文件修改失败!
                请检查代码:
                1、是否有: <div class="right-menu">
                2、是否已添加：<breadcrumb class="breadcrumb-container"/>
                `),Promise.reject(new Error("Error")))}return errorLog("找不到src/layout/components/Navbar.vue目标文件，请查看命令是否使用正确"),Promise.reject(new Error("Error"))}();await fscreateWriteStream(r+"/src/components/Breadcrumb","index.vue",a),log("src/components/Breadcrumb/index.vue文件添加成功"),await fscreateWriteStream(r+"/src/layout/components","Navbar.vue",o),log("src/layout/components/Navbar.vue修改成功"),run("npm run lint:fix",{cwd:r})}catch(r){if(errorLog("addBreadcrumb 目标代码出错，请按上述报错信息检查代码"),e&&0!==e.length)return console.log(123123),Promise.reject(()=>{})}var t,n};