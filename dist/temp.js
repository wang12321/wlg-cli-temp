const{resolve:resolve}=require("path"),{fscreateReadStream:fscreateReadStream,fscreateWriteStream:fscreateWriteStream,isFileExisted:isFileExisted,format:format,newStr:newStr}=require("./common.js"),inquirer=require("inquirer"),chalk=require("chalk"),log=e=>console.log(chalk.green(e)),errorLog=e=>console.log(chalk.red(e));module.exports=async l=>{log("resolve   : "+resolve("./")),log("name : "+l),inquirer.prompt([{type:"input",name:"path",message:`请确认添加文件路径${resolve("./")}/${l}`,default:!0}]).then(e=>{!0===e.path?async function(){"/"===l.substring(0,1)&&(l=l.substring(1,l.length));var e=`${resolve("./")}/${l}`;await isFileExisted(e)?errorLog(`${resolve("./")}/${l}目标文件已存在`):inquirer.prompt([{type:"rawlist",name:"choice",message:"请选择架构",default:0,choices:[{value:1,name:"基础模板"},{value:2,name:"增删改查模板"}]}]).then(async e=>{let r="template.txt",t="基础模板";2===e.choice&&(r="addFile.txt",t="增删改查模板");var a=await fscreateReadStream(`${__dirname}/../PCFile/${r}`);if(-1<l.indexOf(".vue")&&-1<l.indexOf("/")){const s=l.split("/");var i=s[s.length-1],e=s.slice(0,s.length-1).join("/");await fscreateWriteStream(`${resolve("./")}/${e}`,`${i}`,a)}else-1<l.indexOf(".vue")&&-1===l.indexOf("/")?await fscreateWriteStream(`${resolve("./")}`,`${l}`,a):await fscreateWriteStream(`${resolve("./")}/${l}`,"index.vue",a);log(`${t}新增文件成功`)})}():errorLog("已取消新增，请重新cd文件路径添加")})};